<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<title>Life OS</title>

<style>
body{
margin:0;
font-family:-apple-system, system-ui;
background:#f6f6f4;
padding-bottom:100px;
}

.header{
padding:18px;
font-size:22px;
font-weight:700;
}

.card{
background:white;
margin:12px;
border-radius:18px;
padding:16px;
box-shadow:0 4px 14px rgba(0,0,0,0.06);
}

input, textarea{
width:100%;
padding:14px;
border-radius:14px;
border:1px solid #ddd;
font-size:16px;
margin-top:8px;
}

button{
padding:14px;
border-radius:14px;
border:none;
background:#111;
color:white;
font-size:16px;
margin-top:8px;
width:100%;
}

.task{
display:flex;
justify-content:space-between;
padding:12px 0;
border-bottom:1px solid #eee;
}

.bottom{
position:fixed;
bottom:0;
left:0;
right:0;
background:white;
display:flex;
justify-content:space-around;
padding:10px;
border-top:1px solid #eee;
}

.tab{font-size:12px;text-align:center}
.tab.active{font-weight:700}

.fab{
position:fixed;
bottom:80px;
right:20px;
width:60px;
height:60px;
border-radius:50%;
background:#111;
color:white;
font-size:28px;
border:none;
}

.progress{
height:12px;
background:#eee;
border-radius:20px;
overflow:hidden;
margin-top:10px;
}

.progress div{
height:100%;
background:#22c55e;
}

.focus{
font-size:36px;
text-align:center;
margin:20px;
}

.badge{
font-size:12px;
background:#111;
color:white;
padding:4px 8px;
border-radius:12px;
margin-left:6px;
}
</style>
</head>

<body>

<div class="header" id="title">Today</div>

<div id="app"></div>

<button class="fab" onclick="openAdd()">＋</button>

<div class="bottom">
<div class="tab active" onclick="tab('today')">Today</div>
<div class="tab" onclick="tab('focus')">Focus</div>
<div class="tab" onclick="tab('wellness')">Wellness</div>
<div class="tab" onclick="tab('money')">Money</div>
<div class="tab" onclick="tab('planner')">Planner</div>
</div>

<script>

let store=JSON.parse(localStorage.getItem("lifeos")||`{
"tasks":[],
"xp":0,
"streak":0,
"money":[],
"journal":[]
}`);

function save(){localStorage.setItem("lifeos",JSON.stringify(store))}

let current="today"

function tab(t){
current=t
document.querySelectorAll(".tab").forEach(x=>x.classList.remove("active"))
event.target.classList.add("active")
render()
}

function xpAdd(n){
store.xp+=n
save()
}

function render(){
let html=""

if(current=="today"){
let done=store.tasks.filter(t=>t.done).length
let total=store.tasks.length||1
let percent=(done/total)*100

html+=`
<div class="card">
Daily Progress
<div class="progress"><div style="width:${percent}%"></div></div>
XP: ${store.xp} ⭐
</div>

<div class="card">
<input id="taskInput" placeholder="New task">
<button onclick="addTask()">Add</button>
${store.tasks.map((t,i)=>`
<div class="task">
<span>${t.done?"✅":"⬜"} ${t.text}</span>
<button onclick="toggle(${i})">Done</button>
</div>
`).join("")}
</div>
`
}

if(current=="focus"){
html+=`
<div class="card">
Focus Mode
<div class="focus" id="timer">25:00</div>
<button onclick="startFocus()">Start</button>
</div>
`
}

if(current=="wellness"){
html+=`
<div class="card">
Journal
<textarea id="j"></textarea>
<button onclick="saveJournal()">Save</button>
</div>
`
}

if(current=="money"){
html+=`
<div class="card">
<input id="amt" placeholder="Amount">
<button onclick="addMoney()">Add</button>
${store.money.map(m=>`<div>${m}</div>`).join("")}
</div>
`
}

if(current=="planner"){
html+=`
<div class="card">
Life Planner
<textarea id="plan" placeholder="Write goals, plans..."></textarea>
</div>
`
}

document.getElementById("app").innerHTML=html
}

function addTask(){
let v=document.getElementById("taskInput").value
if(!v)return
store.tasks.push({text:v,done:false})
xpAdd(5)
save()
render()
}

function toggle(i){
store.tasks[i].done=!store.tasks[i].done
xpAdd(10)
save()
render()
}

let focusInt

function startFocus(){
let sec=1500
focusInt=setInterval(()=>{
sec--
let m=Math.floor(sec/60)
let s=sec%60
document.getElementById("timer").innerText=
`${m}:${s.toString().padStart(2,"0")}`
if(sec<=0){
clearInterval(focusInt)
xpAdd(25)
alert("Focus complete! +25 XP")
}
},1000)
}

function saveJournal(){
store.journal.push(document.getElementById("j").value)
xpAdd(5)
save()
alert("Saved")
}

function addMoney(){
store.money.push(document.getElementById("amt").value)
xpAdd(2)
save()
render()
}

render()

</script>

</body>
</html>